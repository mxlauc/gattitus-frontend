import{g as Y}from"./_commonjsHelpers-fe705abc.mjs";function W(J,X){return X.forEach(function(x){x&&typeof x!="string"&&!Array.isArray(x)&&Object.keys(x).forEach(function(F){if(F!=="default"&&!(F in J)){var l=Object.getOwnPropertyDescriptor(x,F);Object.defineProperty(J,F,l.get?l:{enumerable:!0,get:function(){return x[F]}})}})}),Object.freeze(Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}))}var $={exports:{}};(function(J,X){(function(x,F){J.exports=F()})(window,function(){return function(x){var F={};function l(f){if(F[f])return F[f].exports;var r=F[f]={i:f,l:!1,exports:{}};return x[f].call(r.exports,r,r.exports,l),r.l=!0,r.exports}return l.m=x,l.c=F,l.d=function(f,r,u){l.o(f,r)||Object.defineProperty(f,r,{enumerable:!0,get:u})},l.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},l.t=function(f,r){if(1&r&&(f=l(f)),8&r||4&r&&typeof f=="object"&&f&&f.__esModule)return f;var u=Object.create(null);if(l.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:f}),2&r&&typeof f!="string")for(var n in f)l.d(u,n,function(a){return f[a]}.bind(null,n));return u},l.n=function(f){var r=f&&f.__esModule?function(){return f.default}:function(){return f};return l.d(r,"a",r),r},l.o=function(f,r){return Object.prototype.hasOwnProperty.call(f,r)},l.p="/",l(l.s=25)}([function(x,F){function l(f,r){for(var u=0;u<r.length;u++){var n=r[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}x.exports=function(f,r,u){return r&&l(f.prototype,r),u&&l(f,u),f}},function(x,F){x.exports=function(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}},function(x,F,l){x.exports=function(f){var r={};function u(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return f[n].call(a.exports,a,a.exports,u),a.l=!0,a.exports}return u.m=f,u.c=r,u.d=function(n,a,m){u.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:m})},u.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},u.t=function(n,a){if(1&a&&(n=u(n)),8&a||4&a&&typeof n=="object"&&n&&n.__esModule)return n;var m=Object.create(null);if(u.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:n}),2&a&&typeof n!="string")for(var T in n)u.d(m,T,function(s){return n[s]}.bind(null,T));return m},u.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return u.d(a,"a",a),a},u.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},u.p="",u(u.s=3)}([function(f,r){var u;u=function(){return this}();try{u=u||new Function("return this")()}catch{typeof window=="object"&&(u=window)}f.exports=u},function(f,r,u){(function(n){var a=u(2),m=setTimeout;function T(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],t(e,this)}function d(e,i){for(;e._state===3;)e=e._value;e._state!==0?(e._handled=!0,s._immediateFn(function(){var o=e._state===1?i.onFulfilled:i.onRejected;if(o!==null){var v;try{v=o(e._value)}catch(w){return void O(i.promise,w)}S(i.promise,v)}else(e._state===1?S:O)(i.promise,e._value)})):e._deferreds.push(i)}function S(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&(typeof i=="object"||typeof i=="function")){var o=i.then;if(i instanceof s)return e._state=3,e._value=i,void k(e);if(typeof o=="function")return void t((v=o,w=i,function(){v.apply(w,arguments)}),e)}e._state=1,e._value=i,k(e)}catch(y){O(e,y)}var v,w}function O(e,i){e._state=2,e._value=i,k(e)}function k(e){e._state===2&&e._deferreds.length===0&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var i=0,o=e._deferreds.length;i<o;i++)d(e,e._deferreds[i]);e._deferreds=null}function P(e,i,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof i=="function"?i:null,this.promise=o}function t(e,i){var o=!1;try{e(function(v){o||(o=!0,S(i,v))},function(v){o||(o=!0,O(i,v))})}catch(v){if(o)return;o=!0,O(i,v)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,i){var o=new this.constructor(T);return d(this,new P(e,i,o)),o},s.prototype.finally=a.a,s.all=function(e){return new s(function(i,o){if(!e||e.length===void 0)throw new TypeError("Promise.all accepts an array");var v=Array.prototype.slice.call(e);if(v.length===0)return i([]);var w=v.length;function y(U,R){try{if(R&&(typeof R=="object"||typeof R=="function")){var B=R.then;if(typeof B=="function")return void B.call(R,function(q){y(U,q)},o)}v[U]=R,--w==0&&i(v)}catch(q){o(q)}}for(var j=0;j<v.length;j++)y(j,v[j])})},s.resolve=function(e){return e&&typeof e=="object"&&e.constructor===s?e:new s(function(i){i(e)})},s.reject=function(e){return new s(function(i,o){o(e)})},s.race=function(e){return new s(function(i,o){for(var v=0,w=e.length;v<w;v++)e[v].then(i,o)})},s._immediateFn=typeof n=="function"&&function(e){n(e)}||function(e){m(e,0)},s._unhandledRejectionFn=function(e){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r.a=s}).call(this,u(5).setImmediate)},function(f,r,u){r.a=function(n){var a=this.constructor;return this.then(function(m){return a.resolve(n()).then(function(){return m})},function(m){return a.resolve(n()).then(function(){return a.reject(m)})})}},function(f,r,u){function n(t){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}u(4);var a,m,T,s,d,S,O,k=u(8),P=(m=function(t){return new Promise(function(e,i){t=s(t),(t=d(t)).beforeSend&&t.beforeSend();var o=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open(t.method,t.url),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(t.headers).forEach(function(w){var y=t.headers[w];o.setRequestHeader(w,y)});var v=t.ratio;o.upload.addEventListener("progress",function(w){var y=Math.round(w.loaded/w.total*100),j=Math.ceil(y*v/100);t.progress(Math.min(j,100))},!1),o.addEventListener("progress",function(w){var y=Math.round(w.loaded/w.total*100),j=Math.ceil(y*(100-v)/100)+v;t.progress(Math.min(j,100))},!1),o.onreadystatechange=function(){if(o.readyState===4){var w=o.response;try{w=JSON.parse(w)}catch{}var y=k.parseHeaders(o.getAllResponseHeaders()),j={body:w,code:o.status,headers:y};O(o.status)?e(j):i(j)}},o.send(t.data)})},T=function(t){return t.method="POST",m(t)},s=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.url&&typeof t.url!="string")throw new Error("Url must be a string");if(t.url=t.url||"",t.method&&typeof t.method!="string")throw new Error("`method` must be a string or null");if(t.method=t.method?t.method.toUpperCase():"GET",t.headers&&n(t.headers)!=="object")throw new Error("`headers` must be an object or null");if(t.headers=t.headers||{},t.type&&(typeof t.type!="string"||!Object.values(a).includes(t.type)))throw new Error("`type` must be taken from module's \xABcontentType\xBB library");if(t.progress&&typeof t.progress!="function")throw new Error("`progress` must be a function or null");if(t.progress=t.progress||function(e){},t.beforeSend=t.beforeSend||function(e){},t.ratio&&typeof t.ratio!="number")throw new Error("`ratio` must be a number");if(t.ratio<0||t.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(t.ratio=t.ratio||90,t.accept&&typeof t.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(t.accept=t.accept||"*/*",t.multiple&&typeof t.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(t.multiple=t.multiple||!1,t.fieldName&&typeof t.fieldName!="string")throw new Error("`fieldName` must be a string");return t.fieldName=t.fieldName||"files",t},d=function(t){switch(t.method){case"GET":var e=S(t.data,a.URLENCODED);delete t.data,t.url=/\?/.test(t.url)?t.url+"&"+e:t.url+"?"+e;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var i=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||a.JSON}(t);(k.isFormData(t.data)||k.isFormElement(t.data))&&(i=a.FORM),t.data=S(t.data,i),i!==P.contentType.FORM&&(t.headers["content-type"]=i)}return t},S=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case a.URLENCODED:return k.urlEncode(t);case a.JSON:return k.jsonEncode(t);case a.FORM:return k.formEncode(t);default:return t}},O=function(t){return t>=200&&t<300},{contentType:a={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:m,get:function(t){return t.method="GET",m(t)},post:T,transport:function(t){return t=s(t),k.selectFiles(t).then(function(e){for(var i=new FormData,o=0;o<e.length;o++)i.append(t.fieldName,e[o],e[o].name);k.isObject(t.data)&&Object.keys(t.data).forEach(function(w){var y=t.data[w];i.append(w,y)});var v=t.beforeSend;return t.beforeSend=function(){return v(e)},t.data=i,T(t)})},selectFiles:function(t){return delete(t=s(t)).beforeSend,k.selectFiles(t)}});f.exports=P},function(f,r,u){u.r(r);var n=u(1);window.Promise=window.Promise||n.a},function(f,r,u){(function(n){var a=n!==void 0&&n||typeof self!="undefined"&&self||window,m=Function.prototype.apply;function T(s,d){this._id=s,this._clearFn=d}r.setTimeout=function(){return new T(m.call(setTimeout,a,arguments),clearTimeout)},r.setInterval=function(){return new T(m.call(setInterval,a,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(s){s&&s.close()},T.prototype.unref=T.prototype.ref=function(){},T.prototype.close=function(){this._clearFn.call(a,this._id)},r.enroll=function(s,d){clearTimeout(s._idleTimeoutId),s._idleTimeout=d},r.unenroll=function(s){clearTimeout(s._idleTimeoutId),s._idleTimeout=-1},r._unrefActive=r.active=function(s){clearTimeout(s._idleTimeoutId);var d=s._idleTimeout;d>=0&&(s._idleTimeoutId=setTimeout(function(){s._onTimeout&&s._onTimeout()},d))},u(6),r.setImmediate=typeof self!="undefined"&&self.setImmediate||n!==void 0&&n.setImmediate||this&&this.setImmediate,r.clearImmediate=typeof self!="undefined"&&self.clearImmediate||n!==void 0&&n.clearImmediate||this&&this.clearImmediate}).call(this,u(0))},function(f,r,u){(function(n,a){(function(m,T){if(!m.setImmediate){var s,d,S,O,k,P=1,t={},e=!1,i=m.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(m);o=o&&o.setTimeout?o:m,{}.toString.call(m.process)==="[object process]"?s=function(y){a.nextTick(function(){w(y)})}:function(){if(m.postMessage&&!m.importScripts){var y=!0,j=m.onmessage;return m.onmessage=function(){y=!1},m.postMessage("","*"),m.onmessage=j,y}}()?(O="setImmediate$"+Math.random()+"$",k=function(y){y.source===m&&typeof y.data=="string"&&y.data.indexOf(O)===0&&w(+y.data.slice(O.length))},m.addEventListener?m.addEventListener("message",k,!1):m.attachEvent("onmessage",k),s=function(y){m.postMessage(O+y,"*")}):m.MessageChannel?((S=new MessageChannel).port1.onmessage=function(y){w(y.data)},s=function(y){S.port2.postMessage(y)}):i&&"onreadystatechange"in i.createElement("script")?(d=i.documentElement,s=function(y){var j=i.createElement("script");j.onreadystatechange=function(){w(y),j.onreadystatechange=null,d.removeChild(j),j=null},d.appendChild(j)}):s=function(y){setTimeout(w,0,y)},o.setImmediate=function(y){typeof y!="function"&&(y=new Function(""+y));for(var j=new Array(arguments.length-1),U=0;U<j.length;U++)j[U]=arguments[U+1];var R={callback:y,args:j};return t[P]=R,s(P),P++},o.clearImmediate=v}function v(y){delete t[y]}function w(y){if(e)setTimeout(w,0,y);else{var j=t[y];if(j){e=!0;try{(function(U){var R=U.callback,B=U.args;switch(B.length){case 0:R();break;case 1:R(B[0]);break;case 2:R(B[0],B[1]);break;case 3:R(B[0],B[1],B[2]);break;default:R.apply(void 0,B)}})(j)}finally{v(y),e=!1}}}}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,u(0),u(7))},function(f,r){var u,n,a=f.exports={};function m(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function s(o){if(u===setTimeout)return setTimeout(o,0);if((u===m||!u)&&setTimeout)return u=setTimeout,setTimeout(o,0);try{return u(o,0)}catch{try{return u.call(null,o,0)}catch{return u.call(this,o,0)}}}(function(){try{u=typeof setTimeout=="function"?setTimeout:m}catch{u=m}try{n=typeof clearTimeout=="function"?clearTimeout:T}catch{n=T}})();var d,S=[],O=!1,k=-1;function P(){O&&d&&(O=!1,d.length?S=d.concat(S):k=-1,S.length&&t())}function t(){if(!O){var o=s(P);O=!0;for(var v=S.length;v;){for(d=S,S=[];++k<v;)d&&d[k].run();k=-1,v=S.length}d=null,O=!1,function(w){if(n===clearTimeout)return clearTimeout(w);if((n===T||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(w);try{n(w)}catch{try{return n.call(null,w)}catch{return n.call(this,w)}}}(o)}}function e(o,v){this.fun=o,this.array=v}function i(){}a.nextTick=function(o){var v=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)v[w-1]=arguments[w];S.push(new e(o,v)),S.length!==1||O||s(t)},e.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.prependListener=i,a.prependOnceListener=i,a.listeners=function(o){return[]},a.binding=function(o){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(o){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(f,r,u){function n(m,T){for(var s=0;s<T.length;s++){var d=T[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}var a=u(9);f.exports=function(){function m(){(function(d,S){if(!(d instanceof S))throw new TypeError("Cannot call a class as a function")})(this,m)}var T,s;return T=m,(s=[{key:"urlEncode",value:function(d){return a(d)}},{key:"jsonEncode",value:function(d){return JSON.stringify(d)}},{key:"formEncode",value:function(d){if(this.isFormData(d))return d;if(this.isFormElement(d))return new FormData(d);if(this.isObject(d)){var S=new FormData;return Object.keys(d).forEach(function(O){var k=d[O];S.append(O,k)}),S}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(d){return Object.prototype.toString.call(d)==="[object Object]"}},{key:"isFormData",value:function(d){return d instanceof FormData}},{key:"isFormElement",value:function(d){return d instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(S,O){var k=document.createElement("INPUT");k.type="file",d.multiple&&k.setAttribute("multiple","multiple"),d.accept&&k.setAttribute("accept",d.accept),k.style.display="none",document.body.appendChild(k),k.addEventListener("change",function(P){var t=P.target.files;S(t),document.body.removeChild(k)},!1),k.click()})}},{key:"parseHeaders",value:function(d){var S=d.trim().split(/[\r\n]+/),O={};return S.forEach(function(k){var P=k.split(": "),t=P.shift(),e=P.join(": ");t&&(O[t]=e)}),O}}])&&n(T,s),m}()},function(f,r){var u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},n=function(a,m,T,s){return m=m||null,T=T||"&",s=s||null,a?function(d){for(var S=new Array,O=0;O<d.length;O++)d[O]&&S.push(d[O]);return S}(Object.keys(a).map(function(d){var S,O,k=d;if(s&&(k=s+"["+k+"]"),typeof a[d]=="object"&&a[d]!==null)S=n(a[d],null,T,k);else{m&&(O=k,k=!isNaN(parseFloat(O))&&isFinite(O)?m+Number(k):k);var P=a[d];P=(P=(P=(P=P===!0?"1":P)===!1?"0":P)===0?"0":P)||"",S=u(k)+"="+u(P)}return S})).join(T).replace(/[!'()*]/g,""):""};f.exports=n}])},function(x,F,l){x.exports=l(14)},function(x,F){x.exports=function(l,f){(f==null||f>l.length)&&(f=l.length);for(var r=0,u=new Array(f);r<f;r++)u[r]=l[r];return u}},function(x,F,l){var f=l(4);x.exports=function(r,u){if(r){if(typeof r=="string")return f(r,u);var n=Object.prototype.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(n):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(r,u):void 0}}},function(x,F){function l(f,r,u,n,a,m,T){try{var s=f[m](T),d=s.value}catch(S){return void u(S)}s.done?r(d):Promise.resolve(d).then(n,a)}x.exports=function(f){return function(){var r=this,u=arguments;return new Promise(function(n,a){var m=f.apply(r,u);function T(d){l(m,n,a,T,s,"next",d)}function s(d){l(m,n,a,T,s,"throw",d)}T(void 0)})}}},function(x,F,l){var f=l(19),r=l(20),u=l(5),n=l(21);x.exports=function(a){return f(a)||r(a)||u(a)||n()}},function(x,F){x.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.15 13.628A7.749 7.749 0 0 0 10 17.75a7.74 7.74 0 0 0 6.305-3.242l-2.387-2.127-2.765 2.244-4.389-4.496-3.614 3.5zm-.787-2.303l4.446-4.371 4.52 4.63 2.534-2.057 3.533 2.797c.23-.734.354-1.514.354-2.324a7.75 7.75 0 1 0-15.387 1.325zM10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"></path></svg>'},function(x,F){x.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.043 8.265l3.183-3.183h-2.924L4.75 10.636v2.923l4.15-4.15v2.351l-2.158 2.159H8.9v2.137H4.7c-1.215 0-2.2-.936-2.2-2.09v-8.93c0-1.154.985-2.09 2.2-2.09h10.663l.033-.033.034.034c1.178.04 2.12.96 2.12 2.089v3.23H15.3V5.359l-2.906 2.906h-2.35zM7.951 5.082H4.75v3.201l3.201-3.2zm5.099 7.078v3.04h4.15v-3.04h-4.15zm-1.1-2.137h6.35c.635 0 1.15.489 1.15 1.092v5.13c0 .603-.515 1.092-1.15 1.092h-6.35c-.635 0-1.15-.489-1.15-1.092v-5.13c0-.603.515-1.092 1.15-1.092z"></path></svg>'},function(x,F){x.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"></path></svg>'},function(x,F){x.exports='<svg width="17" height="10" viewBox="0 0 17 10" xmlns="http://www.w3.org/2000/svg"><path d="M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z"></path></svg>'},function(x,F){x.exports='<svg width="17" height="15" viewBox="0 0 336 276" xmlns="http://www.w3.org/2000/svg"><path d="M291 150.242V79c0-18.778-15.222-34-34-34H79c-18.778 0-34 15.222-34 34v42.264l67.179-44.192 80.398 71.614 56.686-29.14L291 150.242zm-.345 51.622l-42.3-30.246-56.3 29.884-80.773-66.925L45 174.187V197c0 18.778 15.222 34 34 34h178c17.126 0 31.295-12.663 33.655-29.136zM79 0h178c43.63 0 79 35.37 79 79v118c0 43.63-35.37 79-79 79H79c-43.63 0-79-35.37-79-79V79C0 35.37 35.37 0 79 0z"></path></svg>'},function(x,F,l){var f=l(22),r=l(23),u=l(5),n=l(24);x.exports=function(a,m){return f(a)||r(a,m)||u(a,m)||n()}},function(x,F,l){var f=function(r){var u=Object.prototype,n=u.hasOwnProperty,a=typeof Symbol=="function"?Symbol:{},m=a.iterator||"@@iterator",T=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(p,h,C,M){var g=h&&h.prototype instanceof k?h:k,_=Object.create(g.prototype),c=new B(M||[]);return _._invoke=function(L,E,b){var I="suspendedStart";return function(D,A){if(I==="executing")throw new Error("Generator is already running");if(I==="completed"){if(D==="throw")throw A;return V()}for(b.method=D,b.arg=A;;){var N=b.delegate;if(N){var z=j(N,b);if(z){if(z===O)continue;return z}}if(b.method==="next")b.sent=b._sent=b.arg;else if(b.method==="throw"){if(I==="suspendedStart")throw I="completed",b.arg;b.dispatchException(b.arg)}else b.method==="return"&&b.abrupt("return",b.arg);I="executing";var H=S(L,E,b);if(H.type==="normal"){if(I=b.done?"completed":"suspendedYield",H.arg===O)continue;return{value:H.arg,done:b.done}}H.type==="throw"&&(I="completed",b.method="throw",b.arg=H.arg)}}}(p,C,c),_}function S(p,h,C){try{return{type:"normal",arg:p.call(h,C)}}catch(M){return{type:"throw",arg:M}}}r.wrap=d;var O={};function k(){}function P(){}function t(){}var e={};e[m]=function(){return this};var i=Object.getPrototypeOf,o=i&&i(i(q([])));o&&o!==u&&n.call(o,m)&&(e=o);var v=t.prototype=k.prototype=Object.create(e);function w(p){["next","throw","return"].forEach(function(h){p[h]=function(C){return this._invoke(h,C)}})}function y(p,h){var C;this._invoke=function(M,g){function _(){return new h(function(c,L){(function E(b,I,D,A){var N=S(p[b],p,I);if(N.type!=="throw"){var z=N.arg,H=z.value;return H&&typeof H=="object"&&n.call(H,"__await")?h.resolve(H.__await).then(function(G){E("next",G,D,A)},function(G){E("throw",G,D,A)}):h.resolve(H).then(function(G){z.value=G,D(z)},function(G){return E("throw",G,D,A)})}A(N.arg)})(M,g,c,L)})}return C=C?C.then(_,_):_()}}function j(p,h){var C=p.iterator[h.method];if(C===void 0){if(h.delegate=null,h.method==="throw"){if(p.iterator.return&&(h.method="return",h.arg=void 0,j(p,h),h.method==="throw"))return O;h.method="throw",h.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var M=S(C,p.iterator,h.arg);if(M.type==="throw")return h.method="throw",h.arg=M.arg,h.delegate=null,O;var g=M.arg;return g?g.done?(h[p.resultName]=g.value,h.next=p.nextLoc,h.method!=="return"&&(h.method="next",h.arg=void 0),h.delegate=null,O):g:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,O)}function U(p){var h={tryLoc:p[0]};1 in p&&(h.catchLoc=p[1]),2 in p&&(h.finallyLoc=p[2],h.afterLoc=p[3]),this.tryEntries.push(h)}function R(p){var h=p.completion||{};h.type="normal",delete h.arg,p.completion=h}function B(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(U,this),this.reset(!0)}function q(p){if(p){var h=p[m];if(h)return h.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var C=-1,M=function g(){for(;++C<p.length;)if(n.call(p,C))return g.value=p[C],g.done=!1,g;return g.value=void 0,g.done=!0,g};return M.next=M}}return{next:V}}function V(){return{value:void 0,done:!0}}return P.prototype=v.constructor=t,t.constructor=P,t[s]=P.displayName="GeneratorFunction",r.isGeneratorFunction=function(p){var h=typeof p=="function"&&p.constructor;return!!h&&(h===P||(h.displayName||h.name)==="GeneratorFunction")},r.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,t):(p.__proto__=t,s in p||(p[s]="GeneratorFunction")),p.prototype=Object.create(v),p},r.awrap=function(p){return{__await:p}},w(y.prototype),y.prototype[T]=function(){return this},r.AsyncIterator=y,r.async=function(p,h,C,M,g){g===void 0&&(g=Promise);var _=new y(d(p,h,C,M),g);return r.isGeneratorFunction(h)?_:_.next().then(function(c){return c.done?c.value:_.next()})},w(v),v[s]="Generator",v[m]=function(){return this},v.toString=function(){return"[object Generator]"},r.keys=function(p){var h=[];for(var C in p)h.push(C);return h.reverse(),function M(){for(;h.length;){var g=h.pop();if(g in p)return M.value=g,M.done=!1,M}return M.done=!0,M}},r.values=q,B.prototype={constructor:B,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!p)for(var h in this)h.charAt(0)==="t"&&n.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=void 0)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var h=this;function C(E,b){return _.type="throw",_.arg=p,h.next=E,b&&(h.method="next",h.arg=void 0),!!b}for(var M=this.tryEntries.length-1;M>=0;--M){var g=this.tryEntries[M],_=g.completion;if(g.tryLoc==="root")return C("end");if(g.tryLoc<=this.prev){var c=n.call(g,"catchLoc"),L=n.call(g,"finallyLoc");if(c&&L){if(this.prev<g.catchLoc)return C(g.catchLoc,!0);if(this.prev<g.finallyLoc)return C(g.finallyLoc)}else if(c){if(this.prev<g.catchLoc)return C(g.catchLoc,!0)}else{if(!L)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return C(g.finallyLoc)}}}},abrupt:function(p,h){for(var C=this.tryEntries.length-1;C>=0;--C){var M=this.tryEntries[C];if(M.tryLoc<=this.prev&&n.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var g=M;break}}g&&(p==="break"||p==="continue")&&g.tryLoc<=h&&h<=g.finallyLoc&&(g=null);var _=g?g.completion:{};return _.type=p,_.arg=h,g?(this.method="next",this.next=g.finallyLoc,O):this.complete(_)},complete:function(p,h){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&h&&(this.next=h),O},finish:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var C=this.tryEntries[h];if(C.finallyLoc===p)return this.complete(C.completion,C.afterLoc),R(C),O}},catch:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var C=this.tryEntries[h];if(C.tryLoc===p){var M=C.completion;if(M.type==="throw"){var g=M.arg;R(C)}return g}}throw new Error("illegal catch attempt")},delegateYield:function(p,h,C){return this.delegate={iterator:q(p),resultName:h,nextLoc:C},this.method==="next"&&(this.arg=void 0),O}},r}(x.exports);try{regeneratorRuntime=f}catch{Function("r","regeneratorRuntime = r")(f)}},function(x,F,l){var f=l(16),r=l(17);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[x.i,r,""]]);var u={insert:"head",singleton:!1},n=(f(r,u),r.locals?r.locals:{});x.exports=n},function(x,F,l){var f,r=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},u=function(){var e={};return function(i){if(e[i]===void 0){var o=document.querySelector(i);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch{o=null}e[i]=o}return e[i]}}(),n=[];function a(e){for(var i=-1,o=0;o<n.length;o++)if(n[o].identifier===e){i=o;break}return i}function m(e,i){for(var o={},v=[],w=0;w<e.length;w++){var y=e[w],j=i.base?y[0]+i.base:y[0],U=o[j]||0,R="".concat(j," ").concat(U);o[j]=U+1;var B=a(R),q={css:y[1],media:y[2],sourceMap:y[3]};B!==-1?(n[B].references++,n[B].updater(q)):n.push({identifier:R,updater:t(q,i),references:1}),v.push(R)}return v}function T(e){var i=document.createElement("style"),o=e.attributes||{};if(o.nonce===void 0){var v=l.nc;v&&(o.nonce=v)}if(Object.keys(o).forEach(function(y){i.setAttribute(y,o[y])}),typeof e.insert=="function")e.insert(i);else{var w=u(e.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(i)}return i}var s,d=(s=[],function(e,i){return s[e]=i,s.filter(Boolean).join(`
`)});function S(e,i,o,v){var w=o?"":v.media?"@media ".concat(v.media," {").concat(v.css,"}"):v.css;if(e.styleSheet)e.styleSheet.cssText=d(i,w);else{var y=document.createTextNode(w),j=e.childNodes;j[i]&&e.removeChild(j[i]),j.length?e.insertBefore(y,j[i]):e.appendChild(y)}}function O(e,i,o){var v=o.css,w=o.media,y=o.sourceMap;if(w?e.setAttribute("media",w):e.removeAttribute("media"),y&&btoa&&(v+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(y))))," */")),e.styleSheet)e.styleSheet.cssText=v;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(v))}}var k=null,P=0;function t(e,i){var o,v,w;if(i.singleton){var y=P++;o=k||(k=T(i)),v=S.bind(null,o,y,!1),w=S.bind(null,o,y,!0)}else o=T(i),v=O.bind(null,o,i),w=function(){(function(j){if(j.parentNode===null)return!1;j.parentNode.removeChild(j)})(o)};return v(e),function(j){if(j){if(j.css===e.css&&j.media===e.media&&j.sourceMap===e.sourceMap)return;v(e=j)}else w()}}x.exports=function(e,i){(i=i||{}).singleton||typeof i.singleton=="boolean"||(i.singleton=r());var o=m(e=e||[],i);return function(v){if(v=v||[],Object.prototype.toString.call(v)==="[object Array]"){for(var w=0;w<o.length;w++){var y=a(o[w]);n[y].references--}for(var j=m(v,i),U=0;U<o.length;U++){var R=a(o[U]);n[R].references===0&&(n[R].updater(),n.splice(R,1))}o=j}}}},function(x,F,l){(F=l(18)(!1)).push([x.i,`.image-tool {
  --bg-color: #cdd1e0;
  --front-color: #388ae5;
  --border-color: #e8e8eb;
}

  .image-tool__image {
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  .image-tool__image-picture {
      max-width: 100%;
      vertical-align: bottom;
      display: block;
    }

  .image-tool__image-preloader {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-size: cover;
      margin: auto;
      position: relative;
      background-color: var(--bg-color);
      background-position: center center;
    }

  .image-tool__image-preloader::after {
        content: "";
        position: absolute;
        z-index: 3;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        border: 2px solid var(--bg-color);
        border-top-color: var(--front-color);
        left: 50%;
        top: 50%;
        margin-top: -30px;
        margin-left: -30px;
        animation: image-preloader-spin 2s infinite linear;
        box-sizing: border-box;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]::before {
      position: absolute !important;
      content: attr(data-placeholder);
      color: #707684;
      font-weight: normal;
      display: none;
    }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty::before {
        display: block;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty:focus::before {
        display: none;
      }

  .image-tool--empty .image-tool__image {
      display: none;
    }

  .image-tool--empty .image-tool__caption, .image-tool--loading .image-tool__caption {
      display: none;
    }

  .image-tool--filled .cdx-button {
      display: none;
    }

  .image-tool--filled .image-tool__image-preloader {
        display: none;
      }

  .image-tool--loading .image-tool__image {
      min-height: 200px;
      display: flex;
      border: 1px solid var(--border-color);
      background-color: #fff;
    }

  .image-tool--loading .image-tool__image-picture {
        display: none;
      }

  .image-tool--loading .cdx-button {
      display: none;
    }

  /**
   * Tunes
   * ----------------
   */

  .image-tool--withBorder .image-tool__image {
      border: 1px solid var(--border-color);
    }

  .image-tool--withBackground .image-tool__image {
      padding: 15px;
      background: var(--bg-color);
    }

  .image-tool--withBackground .image-tool__image-picture {
        max-width: 60%;
        margin: 0 auto;
      }

  .image-tool--stretched .image-tool__image-picture {
        width: 100%;
      }

@keyframes image-preloader-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
`,""]),x.exports=F},function(x,F,l){x.exports=function(f){var r=[];return r.toString=function(){return this.map(function(u){var n=function(a,m){var T=a[1]||"",s=a[3];if(!s)return T;if(m&&typeof btoa=="function"){var d=(O=s,k=btoa(unescape(encodeURIComponent(JSON.stringify(O)))),P="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(k),"/*# ".concat(P," */")),S=s.sources.map(function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")});return[T].concat(S).concat([d]).join(`
`)}var O,k,P;return[T].join(`
`)}(u,f);return u[2]?"@media ".concat(u[2]," {").concat(n,"}"):n}).join("")},r.i=function(u,n,a){typeof u=="string"&&(u=[[null,u,""]]);var m={};if(a)for(var T=0;T<this.length;T++){var s=this[T][0];s!=null&&(m[s]=!0)}for(var d=0;d<u.length;d++){var S=[].concat(u[d]);a&&m[S[0]]||(n&&(S[2]?S[2]="".concat(n," and ").concat(S[2]):S[2]=n),r.push(S))}},r}},function(x,F,l){var f=l(4);x.exports=function(r){if(Array.isArray(r))return f(r)}},function(x,F){x.exports=function(l){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(l))return Array.from(l)}},function(x,F){x.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(x,F){x.exports=function(l){if(Array.isArray(l))return l}},function(x,F){x.exports=function(l,f){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(l)){var r=[],u=!0,n=!1,a=void 0;try{for(var m,T=l[Symbol.iterator]();!(u=(m=T.next()).done)&&(r.push(m.value),!f||r.length!==f);u=!0);}catch(s){n=!0,a=s}finally{try{u||T.return==null||T.return()}finally{if(n)throw a}}return r}}},function(x,F){x.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(x,F,l){l.r(F),l.d(F,"default",function(){return M});var f=l(3),r=l.n(f),u=l(6),n=l.n(u),a=l(1),m=l.n(a),T=l(0),s=l.n(T),d=(l(15),l(7)),S=l.n(d),O=l(8),k=l.n(O),P=function(){function g(_){var c=_.api,L=_.config,E=_.onSelectFile,b=_.readOnly;m()(this,g),this.api=c,this.config=L,this.onSelectFile=E,this.readOnly=b,this.nodes={wrapper:t("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:t("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:t("div",this.CSS.imagePreloader),caption:t("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}return s()(g,[{key:"render",value:function(_){return _.file&&Object.keys(_.file).length!==0?this.toggleStatus(g.status.UPLOADING):this.toggleStatus(g.status.EMPTY),this.nodes.wrapper}},{key:"createFileButton",value:function(){var _=this,c=t("div",[this.CSS.button]);return c.innerHTML=this.config.buttonContent||"".concat(k.a," ").concat(this.api.i18n.t("Select an Image")),c.addEventListener("click",function(){_.onSelectFile()}),c}},{key:"showPreloader",value:function(_){this.nodes.imagePreloader.style.backgroundImage="url(".concat(_,")"),this.toggleStatus(g.status.UPLOADING)}},{key:"hidePreloader",value:function(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(g.status.EMPTY)}},{key:"fillImage",value:function(_){var c=this,L=/\.mp4$/.test(_)?"VIDEO":"IMG",E={src:_},b="load";L==="VIDEO"&&(E.autoplay=!0,E.loop=!0,E.muted=!0,E.playsinline=!0,b="loadeddata"),this.nodes.imageEl=t(L,this.CSS.imageEl,E),this.nodes.imageEl.addEventListener(b,function(){c.toggleStatus(g.status.FILLED),c.nodes.imagePreloader&&(c.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}},{key:"fillCaption",value:function(_){this.nodes.caption&&(this.nodes.caption.innerHTML=_)}},{key:"toggleStatus",value:function(_){for(var c in g.status)Object.prototype.hasOwnProperty.call(g.status,c)&&this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(g.status[c]),_===g.status[c])}},{key:"applyTune",value:function(_,c){this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(_),c)}},{key:"CSS",get:function(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}}],[{key:"status",get:function(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}}]),g}(),t=function(g){var _,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=document.createElement(g);Array.isArray(c)?(_=E.classList).add.apply(_,S()(c)):c&&E.classList.add(c);for(var b in L)E[b]=L[b];return E},e=l(9),i=l.n(e),o=l(10),v=l.n(o),w=l(11),y=l.n(w),j=function(){function g(_){var c=_.api,L=_.actions,E=_.onChange;m()(this,g),this.api=c,this.actions=L,this.onChange=E,this.buttons=[]}return s()(g,[{key:"render",value:function(_){var c=this,L=t("div",this.CSS.wrapper);return this.buttons=[],g.tunes.concat(this.actions).forEach(function(E){var b=c.api.i18n.t(E.title),I=t("div",[c.CSS.buttonBase,c.CSS.button],{innerHTML:E.icon,title:b});I.addEventListener("click",function(){c.tuneClicked(E.name,E.action)}),I.dataset.tune=E.name,I.classList.toggle(c.CSS.buttonActive,_[E.name]),c.buttons.push(I),c.api.tooltip.onHover(I,b,{placement:"top"}),L.appendChild(I)}),L}},{key:"tuneClicked",value:function(_,c){if(typeof c=="function"&&!c(_))return!1;var L=this.buttons.find(function(E){return E.dataset.tune===_});L.classList.toggle(this.CSS.buttonActive,!L.classList.contains(this.CSS.buttonActive)),this.onChange(_)}},{key:"CSS",get:function(){return{wrapper:"",buttonBase:this.api.styles.settingsButton,button:"image-tool__tune",buttonActive:this.api.styles.settingsButtonActive}}}],[{key:"tunes",get:function(){return[{name:"withBorder",icon:v.a,title:"With border"},{name:"stretched",icon:y.a,title:"Stretch image"},{name:"withBackground",icon:i.a,title:"With background"}]}}]),g}(),U=l(12),R=l.n(U),B=l(13),q=l.n(B),V=l(2),p=l.n(V),h=function(){function g(_){var c=_.config,L=_.onUpload,E=_.onError;m()(this,g),this.config=c,this.onUpload=L,this.onError=E}return s()(g,[{key:"uploadSelectedFile",value:function(_){var c=this,L=_.onPreview,E=function(b){var I=new FileReader;I.readAsDataURL(b),I.onload=function(D){L(D.target.result)}};(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?p.a.selectFiles({accept:this.config.types}).then(function(b){E(b[0]);var I=c.config.uploader.uploadByFile(b[0]);return C(I)||console.warn("Custom uploader method uploadByFile should return a Promise"),I}):p.a.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:function(b){E(b[0])},fieldName:this.config.field}).then(function(b){return b.body})).then(function(b){c.onUpload(b)}).catch(function(b){c.onError(b)})}},{key:"uploadByUrl",value:function(_){var c,L=this;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?C(c=this.config.uploader.uploadByUrl(_))||console.warn("Custom uploader method uploadByUrl should return a Promise"):c=p.a.post({url:this.config.endpoints.byUrl,data:Object.assign({url:_},this.config.additionalRequestData),type:p.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(E){return E.body}),c.then(function(E){L.onUpload(E)}).catch(function(E){L.onError(E)})}},{key:"uploadByFile",value:function(_,c){var L,E=this,b=c.onPreview,I=new FileReader;if(I.readAsDataURL(_),I.onload=function(A){b(A.target.result)},this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")C(L=this.config.uploader.uploadByFile(_))||console.warn("Custom uploader method uploadByFile should return a Promise");else{var D=new FormData;D.append(this.config.field,_),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(function(A){var N=q()(A,2),z=N[0],H=N[1];D.append(z,H)}),L=p.a.post({url:this.config.endpoints.byFile,data:D,type:p.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(A){return A.body})}L.then(function(A){E.onUpload(A)}).catch(function(A){E.onError(A)})}}]),g}();function C(g){return g&&typeof g.then=="function"}/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js — main Tool's interface, public API and methods for working with data
 *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js — module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */var M=function(){function g(c){var L=this,E=c.data,b=c.config,I=c.api,D=c.readOnly;m()(this,g),this.api=I,this.readOnly=D,this.config={endpoints:b.endpoints||"",additionalRequestData:b.additionalRequestData||{},additionalRequestHeaders:b.additionalRequestHeaders||{},field:b.field||"image",types:b.types||"image/*",captionPlaceholder:this.api.i18n.t(b.captionPlaceholder||"Caption"),buttonContent:b.buttonContent||"",uploader:b.uploader||void 0,actions:b.actions||[]},this.uploader=new h({config:this.config,onUpload:function(A){return L.onUpload(A)},onError:function(A){return L.uploadingFailed(A)}}),this.ui=new P({api:I,config:this.config,onSelectFile:function(){L.uploader.uploadSelectedFile({onPreview:function(A){L.ui.showPreloader(A)}})},readOnly:D}),this.tunes=new j({api:I,actions:this.config.actions,onChange:function(A){return L.tuneToggled(A)}}),this._data={},this.data=E}var _;return s()(g,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:R.a,title:"Image"}}}]),s()(g,[{key:"render",value:function(){return this.ui.render(this.data)}},{key:"validate",value:function(c){return c.file&&c.file.url}},{key:"save",value:function(){var c=this.ui.nodes.caption;return this._data.caption=c.innerHTML,this.data}},{key:"renderSettings",value:function(){return this.tunes.render(this.data)}},{key:"appendCallback",value:function(){this.ui.nodes.fileButton.click()}},{key:"onPaste",value:(_=n()(r.a.mark(function c(L){var E,b,I,D,A;return r.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:N.t0=L.type,N.next=N.t0==="tag"?3:N.t0==="pattern"?15:N.t0==="file"?18:21;break;case 3:if(E=L.detail.data,!/^blob:/.test(E.src)){N.next=13;break}return N.next=7,fetch(E.src);case 7:return b=N.sent,N.next=10,b.blob();case 10:return I=N.sent,this.uploadFile(I),N.abrupt("break",21);case 13:return this.uploadUrl(E.src),N.abrupt("break",21);case 15:return D=L.detail.data,this.uploadUrl(D),N.abrupt("break",21);case 18:return A=L.detail.file,this.uploadFile(A),N.abrupt("break",21);case 21:case"end":return N.stop()}},c,this)})),function(c){return _.apply(this,arguments)})},{key:"onUpload",value:function(c){c.success&&c.file?this.image=c.file:this.uploadingFailed("incorrect response: "+JSON.stringify(c))}},{key:"uploadingFailed",value:function(c){console.log("Image Tool: uploading failed because of",c),this.api.notifier.show({message:this.api.i18n.t("Couldn\u2019t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}},{key:"tuneToggled",value:function(c){this.setTune(c,!this._data[c])}},{key:"setTune",value:function(c,L){var E=this;this._data[c]=L,this.ui.applyTune(c,L),c==="stretched"&&Promise.resolve().then(function(){var b=E.api.blocks.getCurrentBlockIndex();E.api.blocks.stretchBlock(b,L)}).catch(function(b){console.error(b)})}},{key:"uploadFile",value:function(c){var L=this;this.uploader.uploadByFile(c,{onPreview:function(E){L.ui.showPreloader(E)}})}},{key:"uploadUrl",value:function(c){this.ui.showPreloader(c),this.uploader.uploadByUrl(c)}},{key:"data",set:function(c){var L=this;this.image=c.file,this._data.caption=c.caption||"",this.ui.fillCaption(this._data.caption),j.tunes.forEach(function(E){var b=E.name,I=c[b]!==void 0&&(c[b]===!0||c[b]==="true");L.setTune(b,I)})},get:function(){return this._data}},{key:"image",set:function(c){this._data.file=c||{},c&&c.url&&this.ui.fillImage(c.url)}}],[{key:"pasteConfig",get:function(){return{tags:["img"],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png)$/i},files:{mimeTypes:["image/*"]}}}}]),g}()}]).default})})($);var K=Y($.exports),Z=W({__proto__:null,default:K},[$.exports]);export{Z as b};

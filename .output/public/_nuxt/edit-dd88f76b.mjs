import{_ as h,u as g,w as u,o as v,c as f,b as r,F as b,a as p,m as _,r as E,g as k}from"./entry-4025c09b.mjs";const y={data(){return{editor:null,page:null}},mounted(){p.get(`${this.mainStore.backendUrl}/api/pages/${this.$route.params.slug}`).then(a=>{this.page=a.data;const s=this.uploadByFile;this.editor=new this.EditorJS({readOnly:!1,data:JSON.parse(a.data.content),tools:{header:this.Header,image:{class:this.ImageTool,config:{buttonContent:"Escoge una image",uploader:{uploadByFile:s}}},list:{class:this.List,inlineToolbar:!0}},i18n:{messages:{ui:{blockTunes:{toggler:{"Click to tune":"Click para m\xE1s opciones","or drag to move":"O arrastra para mover"}},inlineToolbar:{converter:{"Convert to":"Convertir a"}},toolbar:{toolbox:{Add:"Agregar elemento"}}},toolNames:{Text:"Texto",Heading:"Titulo",List:"Lista",Link:"Enlace",Bold:"Negrita",Italic:"Italica"},tools:{link:{"Add a link":"Agregar enlace"},stub:{"The block can not be displayed correctly.":"El elemento no puede ser mostrado correctamente"}},blockTunes:{delete:{Delete:"Eliminar"},moveUp:{"Move up":"Subir"},moveDown:{"Move down":"Bajar"}}}}})})},methods:{uploadByFile(a){return new Promise((s,e)=>{const t=new FormData;t.append("file",a),p.post(`${this.mainStore.backendUrl}/api/images`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{s({success:1,file:{url:o.data.url}})}).catch(o=>{console.log(o),e(o)})})},save(){this.editor.save().then(a=>console.log(JSON.stringify(a))),this.editor.save().then(a=>{p.patch(`${this.mainStore.backendUrl}/api/pages/${this.page.slug}`,{title:this.$refs.title.value,slug:this.$refs.slug.value,content:JSON.stringify(a)})})}}},O=Object.assign(y,{async setup(a,{expose:s}){s();let e,t;const o=g();let l=Object,n=Object,c=Object,d=Object;l=([e,t]=u(()=>_(()=>import("./editor-1cdd695b.mjs").then(function(i){return i.e}),["editor-1cdd695b.mjs","_commonjsHelpers-fe705abc.mjs"])),e=await e,t(),e).default,n=([e,t]=u(()=>_(()=>import("./bundle-9c610aa9.mjs").then(function(i){return i.b}),["bundle-9c610aa9.mjs","_commonjsHelpers-fe705abc.mjs"])),e=await e,t(),e).default,c=([e,t]=u(()=>_(()=>import("./bundle-8d23f721.mjs").then(function(i){return i.b}),["bundle-8d23f721.mjs","_commonjsHelpers-fe705abc.mjs"])),e=await e,t(),e).default,d=([e,t]=u(()=>_(()=>import("./bundle-c30f7d65.mjs").then(function(i){return i.b}),["bundle-c30f7d65.mjs","_commonjsHelpers-fe705abc.mjs"])),e=await e,t(),e).default;const m={mainStore:o,EditorJS:l,Header:n,ImageTool:c,List:d,axios:p,useMainStore:g};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),T={class:"row"},$={class:"col-6"},S=["value"],w={class:"col-6"},x=["value"],P=r("div",{class:"card"},[r("div",{id:"editorjs"})],-1);function A(a,s,e,t,o,l){var n,c;return v(),f(b,null,[r("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...d)=>l.save&&l.save(...d))}," Guardar "),r("div",T,[r("div",$,[r("input",{type:"text",placeholder:"title",ref:"title",value:(n=o.page)==null?void 0:n.title},null,8,S)]),r("div",w,[r("input",{type:"text",placeholder:"slug",ref:"slug",value:(c=o.page)==null?void 0:c.slug},null,8,x)])]),P],64)}var B=h(O,[["render",A]]);const C={components:{PageEdit:B}};function L(a,s,e,t,o,l){const n=E("PageEdit");return v(),k(n)}var D=h(C,[["render",L]]);export{D as default};
